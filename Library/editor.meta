this=map.Merge
	parent
	logic
	map
	math
	System
	System.IO
	System.Windows.Forms
	System.Drawing
ChooseOpenFile=!
	dialog=OpenFileDialog""
	dialog.ShowDialog""
	this=dialog.FileName
ChooseSaveFile=!
	dialog=SaveFileDialog""
	dialog.ShowDialog""
	this=dialog.FileName
SaveAs=!
	SaveAsFileName=ChooseSaveFile""
	If
		Not Equal
			SaveAsFileName
			""
		then=!
			fileName:SaveAsFileName
			WriteFile
				fileName
				editor.dotNet.RealText
WriteFile=!
	writer=StreamWriter arg.1
	writer.Write arg.2
	writer.Close""
fileName=""
Save=!If
	Equal
		fileName
		""
	then=!SaveAs""
	else=!WriteFile
		fileName
		editor.dotNet.RealText
ReadFile=!
	reader=StreamReader arg
	result=reader.ReadToEnd""
	reader.Close""
	this=result
OpenFile=!
	openFileName=ChooseOpenFile""
	If
		Not Equal
			openFileName
			""
		then=!
			fileName:openFileName
			editor.dotNet.RealText:ReadFile fileName
keyBindings=
	[Keys.Escape]=!editor.dotNet.StopInteractiveSearch""
	[Keys.Alt]=
		[Keys.K]=!editor.dotNet.MoveLineDown""
		[Keys.L]=!editor.dotNet.MoveLineUp""
		[Keys.Oemtilde]=!editor.dotNet.MoveCharRight""
		[Keys.J]=!editor.dotNet.MoveCharLeft""
	[BitwiseOr
		Keys.Alt
		Keys.Control
	]=
		[Keys.J]=!editor.dotNet.MoveWordLeft""
		[Keys.Oemtilde]=!editor.dotNet.MoveWordRight""
	[BitwiseOr
		Keys.Alt
		Keys.Control
		Keys.Shift
	]=
		[Keys.J]=!editor.dotNet.SelectWordLeft""
		[Keys.Oemtilde]=!editor.dotNet.SelectWordRight""
		[Keys.K]=!editor.dotNet.SelectLineUp""
		[Keys.J]=!editor.dotNet.SelectLineDown""
	[Keys.F5]=!RunProgram""
	[Keys.Control]=
		[Keys.S]=!Save""
		[Keys.I]=!editor.dotNet.StartInteractiveSearch""
		[Keys.F]=!editor.dotNet.FindAndReplace""
RunProgram=!
	Save""
	// use fileName here
	System.Console.WriteLine editor.dotNet.RealLine
	System.Console.WriteLine editor.dotNet.Column
	Meta.Expression.BreakPoint:Meta.BreakPoint
		//"c:\_projectsupportmaterial\meta\editor\editor.meta"
		fileName
		Meta.Position
			editor.dotNet.RealLine
			editor.dotNet.Column
	Meta.Interpreter.DebugBreak:!editor.dotNet.ShowDebugValue Meta.Interpreter.DebugValue
	Meta.Interpreter.StartDebug fileName
ContinueProgram=!
	// factor out the setting of the breakpoint
	System.Console.WriteLine editor.dotNet.RealLine
	System.Console.WriteLine editor.dotNet.Column
	Meta.Expression.BreakPoint:Meta.BreakPoint
		fileName
		Meta.Position
			editor.dotNet.RealLine
			editor.dotNet.Column
	Meta.Interpreter.ContinueDebug""
ReverseProgram=!
	// factor out the setting of the breakpoint
	System.Console.WriteLine editor.dotNet.RealLine
	System.Console.WriteLine editor.dotNet.Column
	Meta.Expression.BreakPoint:Meta.BreakPoint
		fileName
		Meta.Position
			editor.dotNet.RealLine
			editor.dotNet.Column
	Meta.Interpreter.ReverseDebug""
Editor=!
	dotNet=Init
		ScrollingTextBox""
		=
			ShowSelectionMargin="1"
			AcceptsTab="1"
			Dock=DockStyle.Fill
			ScrollBars=RichTextBoxScrollBars.ForcedBoth
			KeyDown=!
				e=arg.2
				// maybe this should be the other way round ???
				If
					ContainsKey
						keyBindings
						e.Modifiers
					then=!
						subKey=keyBindings.[e.Modifiers]
						If
							ContainsKey
								subKey
								e.KeyCode
							then=!
								subKey.[e.KeyCode]""
					else=!
						If
							ContainsKey
								keyBindings
								e.KeyCode
							then=!keyBindings.[e.KeyCode]""
	SetText=!
		dotNet.Text:arg
Window=!
	form=Form""
	form.Text=arg.title
	form.Font=arg.font
	dotNets=arg.dotNets
	form.Controls.AddRange Apply
		!arg.value.dotNet
		arg.dotNets
	form.WindowState=arg.WindowState
	InitSubMenuItem=!Init
		MenuItem""
		=
			Text=arg.key
			Click=arg.value
	InitMenuItem=!
		menuItem=MenuItem""
		menuItem.Text=arg.key
		menuItem.MenuItems.AddRange Apply
			InitSubMenuItem
			arg.value
		this=menuItem
	// TODO: refactor this, use constructor
	form.Menu=
		menu=MainMenu""
		menu.MenuItems.AddRange Apply
			InitMenuItem
			arg.menu
		this=menu
	Show=!
		form.ShowDialog""
	Close=!form.Close""
editor=Editor""
// rename this to something less stupid
abc="5"
abc="x"
window=Window
	title="Meta Editor"
	menu=
		File=
			["Open..."]=!OpenFile""
			["Save"]=Save
			["Save as..."]=SaveAs
			["Close"]=!window.Close""
		Program=
			Start=RunProgram
			Continue=ContinueProgram
			Reverse=ReverseProgram
	font=Font
		"Courier New"
		"10"
	opacity=
		numerator="10"
		denominator="10"
	WindowState=FormWindowState.Maximized
	dotNets=
		editor
window.Show""