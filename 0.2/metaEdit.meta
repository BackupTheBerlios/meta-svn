|,
	&=-
		mergeAll
		+
			System
			PresentationCore
			windowsbase
			mscorlib
			Meta
			PresentationFramework
			.
				windowsbase
				Key
			.
				windowsbase
				ModifierKeys
	listProgramView=,
		create=,
			|-
				listProgramView
				,
					program=+
						,
							key=+
								,
									lookup=,
										literal=1
							value=,
								literal=" "
		source|,
			&=-
				control
				,
					Children=-
						apply
						.
							source
							program
						,
							statement|-
								parseView
								.
									statement
									value
					KeyDown=-
						MapKeys
						,
							<Alt=,
								<Enter=,
									|-
										.
											-
												get_Children
											Add_UIElement
										-
											view
											-
												.
													literalStringView
													create
			badge=-
				.
					Brushes
					get_Green
			code=,
				|,
					program=-
						foreach
						-
							children
						,
							key|,
								value|,
									key=,
										literal=key
									value=-
										.
											value
											code
	emptyView=,
		|,
			&=-
				textBox
				,
					PreviewTextInput=,
						|,
							e|-
								.
									e
									set_Handled_Boolean
								1
			badge=-
				.
					Brushes
					get_Red
			code=,
				|0
	literalEmptyView=,
		|,
			&=-
				textBox
				,
					PreviewTextInput=,
						|,
							e|-
								.
									e
									set_Handled_Boolean
								1
			badge=-
				.
					Brushes
					get_Yellow
			code=,
				|,
					literal=0
	textBox=,
		init|,
			&=-
				TextBox
				-
					merge
					,
						FontFamily=-
							FontFamily_String
							"Courier New"
						FontSize=16
						Padding=-
							Thickness_Double
							2
						BorderThickness=-
							Thickness_Double
							0
						AcceptsReturn=1
					init
	horizontal=.
		Orientation
		Horizontal
	stringView=,
		create=,
			|-
				stringView
				" "
		text|,
			&=-
				textBox
				,
					Text=text
			badge=-
				.
					Brushes
					get_Fuchsia
			code=get_Text
	numberView=,
		number|,
			&=-
				textBox
				,
					Text=-
						integerToString
						number
					PreviewTextInput=,
						|,
							e|-
								apply
								-
									.
										e
										get_Text
								,
									c|-
										if
										-
											not
											-
												.
													Char
													IsDigit_Char
												c
										,
											|-
												.
													e
													set_Handled_Boolean
												1
			badge=-
				.
					Brushes
					get_LightYellow
			code=,
				|-
					stringToNumber
					-
						get_Text
	multi=,
		init|,
			&=-
				StackPanel
				-
					merge
					,
						Margin=-
							Thickness_Double_Double_Double_Double
							0
							0
							0
							0
						Orientation=.
							PresentationFramework
							Orientation
							Vertical
						.
							FrameworkElement
							HorizontalAlignmentProperty
						=.
							PresentationFramework
							HorizontalAlignment
							Left
						MouseLeftButtonDown=,
							|,
								e|,
									-
										.
											e
											set_Handled_Boolean
										1
									-
										.
											panel
											Focus
					init
			setChildren=,
				value|,
					children=-
						get_Children
					-
						.
							children
							Clear
					-
						apply
						value
						.
							children
							Add_UIElement
			children=,
				|-
					enumerableToArray
					-
						get_Children
	entry=,
		create=,
			|-
				entry
				-
					.
						stringView
						create
				-
					.
						stringView
						create
		key|,
			value|,
				&=-
					control
					,
						Children=+
							key
							value
						Orientation=.
							PresentationFramework
							Orientation
							Horizontal
						KeyDown=-
							MapKeys
							,
								<Alt=,
									<Enter=,
										|-
											.
												Parent
												Children
												Insert_Int32_UIElement
											-
												add
												-
													.
														Parent
														Children
														IndexOf_UIElement
													this
												1
											-
												.
													entry
													create
				key=,
					|-
						.
							-
								children
							1
							code
				value=,
					|-
						.
							-
								children
							2
							code
	copied=0
	view=,
		content|,
			&=-
				multi
				,
					Focusable=1
					Orientation=horizontal
					KeyDown=-
						MapKeys
						,
							<Control=-
								modify
								,
									<U=selectView
									<I=callView
									<L=listProgramView
									<N=literalNumberView
									<F=searchView
									<T=literalStringView
									<P=programView
								,
									value|,
										|-
											ChangeChild
											-
												.
													value
													create
			Clear=,
				|-
					.
						-
							get_Children
						Clear
			AddChild=,
				child|-
					.
						-
							get_Children
						Add_UIElement
					child
			ChangeChild=,
				content|,
					-
						Clear
					-
						AddChild
						-
							ifElse
							-
								contains
								content
								"badge"
							,
								|-
									Label
									,
										VerticalAlignment=.
											VerticalAlignment
											Top
										Width=10
										Height=20
										Background=.
											-
												merge
												,
													badge=-
														.
															Brushes
															get_Black
												content
											badge
							,
								|-
									Label
									,
										Width=0
					-
						AddChild
						content
			-
				ChangeChild
				content
			code=,
				|-
					.
						-
							children
						2
						code
	MapKeys=,
		keys|,
			sender|,
				e|-
					callIf
					keys
					-
						.
							-
								.
									e
									get_KeyboardDevice
							get_Modifiers
					,
						functions|+
							-
								callIf
								functions
								-
									.
										e
										get_SystemKey
								,
									func|,
										-
											func
										-
											.
												e
												set_Handled_Boolean
											1
							-
								callIf
								functions
								-
									.
										e
										get_Key
								,
									func|,
										-
											print
											-
												.
													e
													get_Key
										-
											func
										-
											.
												e
												set_Handled_Boolean
											1
	control=,
		init|,
			&=-
				multi
				-
					merge
					,
						Focusable=1
					init
	functionView=,
		key|,
			value|,
				&=-
					control
					,
						Children=+
							-
								view
								-
									stringView
									.
										value
										parameter
							-
								parseView
								.
									value
									expression
				badge=-
					.
						Brushes
						get_Azure
				key=,
					|"function"
				value=,
					|,
						parameter=-
							.
								-
									children
								1
								code
						expression=-
							.
								-
									children
								2
								code
	statementBase=,
		children|,
			&=-
				control
				,
					Children=children
					KeyDown=-
						MapKeys
						,
							<Alt=,
								<Y=,
									|-
										.
											Parent
											Parent
											Children
											Insert_Int32_UIElement
										-
											add
											-
												.
													Parent
													Parent
													Children
													IndexOf_UIElement
												Parent
											1
										-
											view
											-
												.
													functionStatementView
													create
								<Enter=,
									|-
										.
											Parent
											Parent
											Children
											Insert_Int32_UIElement
										-
											add
											-
												.
													Parent
													Parent
													Children
													IndexOf_UIElement
												Parent
											1
										-
											view
											-
												.
													statementView
													create
			badge=-
				.
					Brushes
					get_Azure
	statementView=,
		create=,
			|-
				statementView
				,
					key=+
						,
							lookup=,
								literal=" "
					value=,
						literal=" "
		source|,
			&=-
				statementBase
				+
					-
						parseView
						.
							source
							key
					-
						parseView
						.
							source
							value
			Orientation=.
				PresentationFramework
				Orientation
				Horizontal
			code=,
				|,
					key=-
						.
							-
								children
							1
							code
					value=-
						.
							-
								children
							2
							code
			badge=-
				.
					Brushes
					get_Gray
	searchStatementView=,
		create=,
			|-
				searchStatementView
				,
					keys=,
						literal="hello"
					value=,
						literal="hello"
		source|,
			&=-
				statementBase
				+
					-
						parseView
						.
							source
							keys
					-
						parseView
						.
							source
							value
			code=,
				|,
					keys=-
						.
							-
								children
							1
							code
					value=-
						.
							-
								children
							2
							code
			badge=-
				.
					Brushes
					get_Azure
	currentStatementView=,
		create=,
			|-
				currentStatementView
				,
					value=,
						literal=" "
		source|,
			&=-
				statementBase
				+
					-
						parseView
						.
							source
							value
			code=,
				|,
					current=0
					value=-
						.
							-
								children
							1
							code
			badge=-
				.
					Brushes
					get_Green
	functionStatementView=,
		create=,
			|-
				functionStatementView
				,
					value=,
						literal=,
							parameter="arg"
							expression=,
								literal="hello"
		source|,
			-
				print
				.
					source
			&=-
				statementBase
				+
					-
						view
						-
							stringView
							.
								source
								value
								literal
								parameter
					-
						parseView
						.
							source
							value
							literal
							expression
			code=,
				|,
					key=,
						literal="function"
					value=,
						literal=,
							parameter=-
								.
									-
										children
									1
									code
							expression=-
								.
									-
										children
									2
									code
			badge=-
				.
					Brushes
					get_Azure
	programView=,
		create=,
			|-
				programView
				,
					program=+
						,
							key=+
								,
									lookup=,
										literal=" "
							value=,
								literal=" "
		source|,
			&=-
				control
				,
					Children=-
						apply
						.
							source
							program
						,
							statement|-
								view
								-
									ifElse
									-
										if
										-
											contains
											statement
											"key"
										,
											|-
												equal
												.
													statement
													key
												,
													literal="function"
									,
										|-
											functionStatementView
											statement
									,
										|-
											ifElse
											-
												contains
												statement
												"current"
											,
												|-
													currentStatementView
													statement
											,
												|-
													ifElse
													-
														contains
														statement
														"keys"
													,
														|-
															searchStatementView
															statement
													,
														|-
															statementView
															statement
			badge=-
				.
					Brushes
					get_Blue
			code=,
				|,
					program=-
						apply
						-
							children
						,
							entry|-
								.
									entry
									code
	mapView=,
		create=,
			|-
				mapView
				,
					"hello"="world"
		entries|,
			&=-
				control
				,
					Children=-
						foreach
						entries
						,
							key|,
								value|-
									ifElse
									-
										equal
										key
										"function"
									,
										|-
											functionView
											key
											value
									,
										|-
											entry
											-
												parseView
												key
											-
												parseView
												value
			code=,
				|-
					sum
					-
						apply
						-
							children
						,
							entry|,
								-
									.
										entry
										key
								=-
									.
										entry
										value
					merge
	callView=,
		create=,
			|-
				callView
				,
					call=+
						,
							search=,
								literal="hello"
						,
							literal="world"
		source|,
			&=-
				control
				,
					Children=-
						apply
						.
							source
							call
						,
							arg|-
								parseView
								arg
					KeyDown=-
						MapKeys
						,
							<Alt=,
								<Enter=,
									|-
										.
											-
												get_Children
											Add_UIElement
										-
											view
											-
												.
													literalStringView
													create
			badge=-
				.
					Brushes
					get_BurlyWood
			code=,
				|,
					call=-
						apply
						-
							children
						,
							child|-
								.
									child
									code
	lookupView=,
		create=,
			|-
				lookupView
				,
					lookup=,
						literal="hello"
		source|,
			&=-
				control
				,
					Children=+
						-
							parseView
							.
								source
								lookup
			badge=-
				.
					Brushes
					get_MistyRose
			code=,
				|,
					lookup=-
						.
							-
								children
							1
							code
	searchView=,
		create=,
			|-
				searchView
				,
					search=,
						literal="hello"
		source|,
			&=-
				control
				,
					Children=+
						-
							parseView
							.
								source
								search
			badge=-
				.
					Brushes
					get_DeepSkyBlue
			code=,
				|,
					search=-
						.
							-
								children
							1
							code
	literalNumberView=,
		create=,
			|-
				literalNumberView
				,
					literal=1
		source|,
			&=-
				textBox
				,
					Text=-
						integerToString
						.
							source
							literal
					Background=-
						.
							Brushes
							get_LightYellow
					PreviewTextInput=,
						|,
							e|-
								apply
								-
									.
										e
										get_Text
								,
									c|-
										if
										-
											not
											-
												.
													Char
													IsDigit_Char
												c
										,
											|-
												.
													e
													set_Handled_Boolean
												1
			code=,
				|,
					literal=-
						stringToNumber
						-
							get_Text
	literalStringView=,
		create=,
			|-
				literalStringView
				,
					literal=" "
		source|,
			&=-
				textBox
				,
					Text=.
						source
						literal
					Background=-
						.
							Brushes
							get_Fuchsia
			code=,
				|,
					literal=-
						get_Text
	literalView=,
		create=,
			|-
				literalView
				,
					literal=" "
		source|,
			&=-
				control
				,
					Children=+
						-
							parseView
							.
								source
								literal
			badge=-
				.
					Brushes
					get_DarkViolet
			code=,
				|,
					literal=-
						.
							-
								children
							1
							code
	currentView=,
		create=,
			|-
				currentView
		|,
			&=-
				textBox
				,
					PreviewTextInput=,
						|,
							e|-
								.
									e
									set_Handled_Boolean
								1
					code=,
						|,
							current=0
			badge=-
				.
					Brushes
					get_White
	selectView=,
		create=,
			|-
				selectView
				,
					select=+
						,
							search=,
								literal="hello"
		source|,
			&=-
				control
				,
					Children=-
						apply
						.
							source
							select
						,
							arg|-
								parseView
								arg
					KeyDown=-
						MapKeys
						,
							<Alt=,
								<Enter=,
									|-
										.
											-
												get_Children
											Add_UIElement
										-
											view
											-
												.
													literalStringView
													create
			badge=-
				.
					Brushes
					get_Chocolate
			code=,
				|,
					select=-
						apply
						-
							children
						,
							child|-
								.
									child
									code
	parseView=,
		arg|-
			view
			-
				switch
				arg
				,
					!"empty"=emptyView
					!"isString"=stringView
					!"isNumber"=numberView
					,
						|-
							containedBy
							"call"
							arg
					=callView
					,
						|-
							containedBy
							"literal"
							arg
					=,
						arg|-
							ifElse
							-
								isString
								.
									arg
									literal
							,
								|-
									literalStringView
									arg
							,
								|-
									ifElse
									-
										isNumber
										.
											arg
											literal
									,
										|-
											literalNumberView
											arg
									,
										|-
											literalView
											arg
					,
						|-
							contains
							arg
							"search"
					=searchView
					,
						|-
							contains
							arg
							"lookup"
					=lookupView
					,
						|-
							contains
							arg
							"select"
					=selectView
					-
						containedBy
						"current"
					=currentView
					,
						|-
							if
							-
								contains
								arg
								"program"
							,
								|-
									sum
									-
										foreach
										-
											range
											-
												count
												.
													arg
													program
										,
											key|,
												value|-
													if
													-
														contains
														.
															arg
															program
															<key
														"key"
													,
														|-
															equal
															.
																arg
																program
																<key
																key
															,
																literal=key
									and
					=listProgramView
					,
						|-
							contains
							arg
							"program"
					=programView
					,
						|1
					=,
						|-
							mapView
							arg
	load=,
		|-
			.
				scrollViewer
				set_Content_Object
			-
				parseView
				-
					print
					-
						parse
						path
	completeCode=,
		|-
			.
				-
					.
						scrollViewer
						get_Content
				code
	saveAs=,
		|-
			.
				-
					SaveFileDialog
					,
						Filter="*.meta (Meta files)|*.meta"
						DefaultExt=".meta"
						AddExtension=1
						FileOk=,
							dialog|,
								|,
									path:-
										.
											dialog
											get_FileName
									-
										Save
				ShowDialog
	save=,
		|-
			ifElse
			-
				empty
				path
			saveAs
			,
				|-
					.
						File
						WriteAllText_String_String
					path
					-
						toString
						-
							completeCode
	open=,
		|-
			.
				-
					OpenFileDialog
					,
						Filter="*.meta (Meta files)|*.meta"
						FileOk=,
							dialog|,
								|,
									path:-
										.
											dialog
											get_FileName
									-
										load
				ShowDialog
	close=,
		|-
			.
				window
				Close
	run=,
		|,
			-
				save
			-
				.
					Process
					Start_String_String
				"C:\Meta\0.2\bin\Debug\Meta.exe"
				path
	createMenu=,
		items|-
			Menu
			,
				.
					DockPanel
					DockProperty
				=.
					Dock
					Top
				Items=-
					apply
					items
					,
						item|-
							MenuItem
							,
								Header=.
									-
										keys
										item
									1
								Items=-
									apply
									.
										item
										<Header
									,
										val|-
											MenuItem
											,
												Header=.
													-
														keys
														val
													1
												Click=,
													|.
														val
														<Header
	menu=-
		createMenu
		+
			,
				File=+
					,
						Open=open
					,
						SaveAs=saveAs
					,
						Save=save
					,
						Exit=close
			,
				Debug=+
					,
						Run=run
	scrollViewer=-
		ScrollViewer
	path="C:\Meta\0.2\learning.meta"
	-
		load
		path
	panel=-
		DockPanel
		,
			Children=+
				menu
				scrollViewer
	window=-
		Window
		,
			Content=panel
			Title="Meta Edit"
	-
		.
			-
				Application
			Run_Window
		window