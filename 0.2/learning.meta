|,
	&=-
		mergeAll
		+
			<"MathML"
			<"MathML.Rendering"
			System
			mscorlib
			<"System.Windows.Forms"
			<"System.Drawing"
	printNodes=,
		nodes|,
			data|,
				depth|-
					filter
					-
						joinAll
						-
							apply
							data
							,
								entry|-
									joinAll
									-
										apply
										-
											enumerableToArray
											nodes
										,
											node|-
												if
												-
													.
														node
														get_Checked
												,
													|,
														key=-
															.
																node
																get_Text
														&=-
															if
															-
																contains
																entry
																key
															,
																|,
																	value=.
																		entry
																		<key
																	&=-
																		ifElse
																		-
																			isString
																			value
																		,
																			|+
																				,
																					type=-
																						ifElse
																						-
																							contains
																							data
																							key
																						,
																							|,
																								name=.
																									-
																										keys
																										.
																											data
																											<key
																									1
																								value=.
																									data
																									<key
																									<name
																						,
																							|,
																								name="rtf"
																								value=0
																					margin=-
																						Padding_Int32_Int32_Int32_Int32
																						-
																							multiply
																							depth
																							10
																						10
																						0
																						0
																					types=,
																						mathml=,
																							|,
																								math=-
																									MathMLControl
																									,
																										Margin=margin
																										Height=80
																										Width=500
																										BackColor=-
																											.
																												Color
																												get_White
																										MathElement=,
																											document=-
																												MathMLDocument
																											asdf=-
																												.
																													document
																													LoadXml_String
																												value
																											&=-
																												.
																													document
																													get_DocumentElement
																								&=math
																						rtf=,
																							asdf|,
																								box=-
																									RichTextBox
																									,
																										Margin=margin
																										Width=500
																										Font=-
																											Font_String_Single
																											"Arial"
																											10
																										KeyDown=,
																											|,
																												e|-
																													.
																														e
																														set_Handled_Boolean
																													1
																										KeyPress=,
																											|,
																												e|-
																													.
																														e
																														set_Handled_Boolean
																													1
																										
																										BorderStyle=.
																											BorderStyle
																											None
																										ContentsResized=,
																											sender|,
																												e|-
																													.
																														sender
																														set_Height_Int32
																													-
																														.
																															-
																																.
																																	e
																																	get_NewRectangle
																															get_Height
																										Rtf=-
																											joinAll
																											+
																												"{\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0{"
																												-
																													if
																													-
																														contains
																														data
																														key
																													,
																														|.
																															data
																															<key
																															rtf
																												value
																												"}"
																								&=box
																					&=-
																						.
																							types
																							.
																								type
																								name
																		,
																			|-
																				printNodes
																				-
																					.
																						node
																						get_Nodes
																				value
																				-
																					add
																					depth
																					1
					,
						arg|-
							not
							-
								equal
								0
								arg
	data=0
	getNodes=,
		data|,
			merged=-
				mergeAll
				data
			&=-
				apply
				-
					keys
					merged
				,
					key|-
						TreeNode
						,
							Text=key
							Checked=1
							Nodes=-
								getNodes
								-
									joinAll
									-
										apply
										data
										,
											map|-
												.
													,
														0=,
															|0
														1=,
															|-
																.
																	,
																		1=,
																			|0
																		0=,
																			|.
																				map
																				<key
																	-
																		isString
																		.
																			map
																			<key
													-
														containedBy
														key
														map
	load=,
		file|,
			data:-
				.
					/
					Meta
					Parser
					Parse_String
				file
			asdf=-
				.
					-
						.
							tree
							get_Nodes
					AddRange_TreeNode[]
				-
					getNodes
					data
			asdf=-
				loadText
	loadText=,
		|+
			-
				.
					-
						.
							panel
							get_Controls
					Clear
			-
				.
					-
						.
							panel
							get_Controls
					AddRange_Control[]
				-
					printNodes
					-
						.
							tree
							get_Nodes
					data
					0
	tree=-
		TreeView
		,
			AfterCheck=,
				|,
					e|-
						loadText
			Width=200
			Dock=.
				DockStyle
				Left
			CheckBoxes=1
	panel=-
		FlowLayoutPanel
		,
			BackColor=-
				.
					Color
					get_White
			WrapContents=0
			AutoScroll=1
			FlowDirection=.
				FlowDirection
				TopDown
			Dock=.
				DockStyle
				Fill
	form=-
		Form
		,
			Size=+
				800
				600
			Text="Learning"
			Controls=+
				panel
				-
					Splitter
					,
						Dock=.
							DockStyle
							Left
				tree
			Load=,
				|,
					|+
						-
							load
							"D:\Meta\0.2\relativity.learn"
			Menu=-
				<"MainMenu_MenuItem[]"
				+
					-
						MenuItem
						,
							Text="File"
							MenuItems=+
								-
									MenuItem
									,
										Text="Open..."
										Click=,
											|,
												|-
													.
														,
															&=-
																OpenFileDialog
															Filter="*.learn (Learning files)|*.learn"
															FileOk=,
																dialog|,
																	|-
																		load
																		.
																			dialog
																			FileName
														ShowDialog
								-
									MenuItem
									,
										Text="Exit"
										Click=,
											|,
												|-
													.
														form
														Close
	asdf=-
		.
			Application
			Run_Form
		form