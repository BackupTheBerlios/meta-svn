|,
	&=-
		sum
		+
			PresentationFramework
			PresentationCore
			windowsbase
			mscorlib
			Meta
		merge
	emptyView=,
		|,
			&=-
				TextBox
				,
					Background=.
						Brushes
						Red
					PreviewTextInput=,
						|,
							e|,
								&=e
								Handled=1
			getMap=,
				|0
	stringView=,
		text|,
			&=-
				TextBox
			Text=text
			Background=.
				Brushes
				Fuchsia
			getMap=,
				|Text
	numberView=,
		number|,
			&=-
				TextBox
			Background=.
				Brushes
				LightYellow
			Text=-
				integerToString
				number
			getMap=,
				|-
					stringToInteger
					Text
			PreviewTextInput=,
				|,
					e|-
						apply
						.
							e
							Text
						,
							c|-
								if
								-
									not
									-
										.
											Char
											IsDigit_Char
										c
								,
									then=,
										|,
											&=e
											Handled=1
	multi=,
		views|-
			StackPanel
			,
				Margin=-
					.
						Thickness
						Thickness_Double
					5
				Children=views
	entry=,
		key|,
			value|,
				&=-
					multi
					+
						key
						value
				getKey=,
					|-
						.
							Children
							0
							getMap
				Focusable=1
				getValue=,
					|-
						.
							Children
							1
							getMap
	view=,
		content|,
			&=-
				multi
				+
					content
			Margin=-
				.
					Thickness
					Thickness_Double
				0
			getMap=,
				|-
					.
						Children
						0
						getMap
			setView=,
				view|,
					!Children=+
						view
			keys=,
				<.
					ModifierKeys
					Control=,
					<.
						Key
						W=,
						|+
							-
								setView
								-
									stringView
									0
							-
								.
									Children
									0
									Focus
					<.
						Key
						E=,
						|+
							-
								setView
								-
									numberView
									1
							-
								.
									Children
									0
									Focus
					<.
						Key
						R=,
						|+
							-
								setView
								-
									emptyView
									1
							-
								.
									Children
									0
									Focus
			KeyDown=,
				sender|,
					e|-
						callIf
						keys
						.
							e
							KeyboardDevice
							Modifiers
						,
							moreKeys|-
								callIf
								moreKeys
								.
									e
									Key
								,
									func|,
										asdf=-
											func
										&=e
										Handled=1
	functionView=,
		key|,
			value|,
				&=-
					multi
					+
						-
							view
							-
								stringView
								.
									value
									parameter
						-
							parse
							.
								value
								expression
				Focusable=1
				getKey=,
					|"function"
				getValue=,
					|,
						parameter=-
							.
								Children
								0
								getMap
						expression=-
							.
								Children
								1
								getMap
				Background=.
					Brushes
					Azure
	statementView=,
		source|,
			&=-
				multi
				+
					-
						parse
						,
							select=.
								source
								key
					-
						parse
						.
							source
							value
			Focusable=1
			Background=.
				Brushes
				Gray
	functionStatementView=,
		source|,
			&=-
				multi
				+
					-
						view
						-
							stringView
							.
								source
								value
								literal
								parameter
					-
						parse
						.
							source
							value
							literal
							expression
			Focusable=1
			getMap=,
				|,
					key=,
						literal="function"
					value=,
						literal=,
							parameter=-
								.
									Children
									0
									getMap
							expression=-
								.
									Children
									1
									getMap
			Background=.
				Brushes
				Azure
	programView=,
		statements|,
			&=-
				multi
				-
					foreach
					statements
					,
						key|,
							value|-
								if
								-
									equal
									.
										key
										key
									,
										literal="function"
								,
									then=,
										|-
											functionStatementView
											value
									else=,
										|-
											statementView
											value
			Focusable=1
			getMap=,
				|-
					sum
					-
						apply
						-
							enumerableToArray
							Children
						,
							entry|,
								<-
									.
										entry
										getKey=-
									.
										entry
										getValue								
					merge
	mapView=,
		entries|,
			&=-
				multi
				-
					foreach
					entries
					,
						key|,
							value|-
								if
								-
									equal
									key
									"function"
								,
									then=,
										|-
											functionView
											key
											value
									else=,
										|-
											entry
											-
												parse
												key
											-
												parse
												value
			Focusable=1
			getMap=,
				|-
					sum
					-
						apply
						-
							enumerableToArray
							Children
						,
							entry|,
								<-
									.
										entry
										getKey=-
									.
										entry
										getValue								
					merge
	callView=,
		source|,
			&=-
				multi
				-
					apply
					.
						source
						call
					,
						arg|-
							parse
							arg
			Background=.
				Brushes
				BurlyWood
			Focusable=1
			Margin=-
				.
					Thickness
					Thickness_Double
				3
			getMap=,
				|,
					call=-
						apply
						-
							enumerableToArray
							Children
						,
							child|-
								.
									child
									getMap
	lookupView=,
		source|,
			&=-
				multi
				+
					-
						parse
						.
							source
							lookup
			Focusable=1
			getMap=,
				|,
					lookup=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				MistyRose
	searchView=,
		source|,
			&=-
				multi
				+
					-
						parse
						.
							source
							search
			Focusable=1
			getMap=,
				|,
					search=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				DeepSkyBlue
	literalView=,
		source|,
			&=-
				multi
				+
					-
						parse
						.
							source
							literal
			getMap=,
				|,
					literal=-
						.
							Children
							0
							getMap
			Focusable=1
			Background=.
				Brushes
				DarkViolet
	selectView=,
		source|,
			&=-
				multi
				-
					apply
					.
						source
						select
					,
						arg|-
							parse
							arg
			Focusable=1
			getMap=,
				|,
					select=-
						apply
						-
							enumerableToArray
							Children
						,
							child|-
								.
									child
									getMap
			Background=.
				Brushes
				Chocolate
	parse=,
		arg|-
			view
			-
				case
				arg
				,
					<isEmpty=emptyView
					<isString=stringView
					<isNumber=numberView
					<,
						|-
							hasKey
							arg
							"call"=callView
					<,
						|-
							hasKey
							arg
							"literal"=literalView
					<,
						|-
							hasKey
							arg
							"search"=searchView
					<,
						|-
							hasKey
							arg
							"lookup"=lookupView
					<,
						|-
							hasKey
							arg
							"select"=selectView
					<,
						|-
							hasKey
							arg
							"program"=programView
				,
					|-
						mapView
						arg
	load=,
		|,
			&=.
				panel
				Children
				1
			Content=-
				parse
				-
					.
						Binary
						Deserialize_String
					path
	currentData=,
		|-
			.
				panel
				Children
				1
				Content
				getMap
	commands=,
		File=,
			Open=,
				|,
					dialog=-
						OpenFileDialog
						OpenFileDialog
					.
						dialog
						Filter
					="*.meta (Meta files)|*.meta"
					asdf=-
						if
						-
							.
								dialog
								ShowDialog
						,
							then=,
								|,
									!path=.
										dialog
										FileName
									asdf=-
										load
			SaveAs=,
				|,
					dialog=-
						with
						-
							.
								SaveFileDialog
								SaveFileDialog
						,
							Filter="*.meta (Meta files)|*.meta"
							DefaultExt=".meta"
							AddExtension=1
					asdf=-
						if
						-
							.
								dialog
								ShowDialog
						,
							then=,
								|,
									!path=.
										dialog
										FileName
									asdf=-
										Save
			Save=,
				|-
					if
					-
						isEmpty
						path
					,
						then=,
							|-
								SaveAs
						else=,
							|-
								.
									Binary
									Serialize_Map_String
								-
									currentData
								path
			Exit=,
				|-
					.
						window
						Close
		Edit=,
			String=,
				|0
			Number=,
				|0
			Map=,
				|0
			Empty=,
				|0
		View=,
			Up=,
				|0
			Down=,
				|0
			Next=,
				|0
			Previous=,
				|0
		Debug=,
			Run=,
				|-
					.
						-
							.
								ObjectMap
								ObjectMap_Map
							-
								currentData
						Call_Map_Position
					0
					-
						.
							Position
							Position_Position_Map
						-
							.
								Position
								Position_Position_Map
							.
								RootPosition
								rootPosition
							"filesystem"
						"localhost"
	
	menu=-
		Menu
		,
			<.
				DockPanel
				DockProperty=.
				Dock
				Top
			Items=-
				foreach
				commands
				,
					key|,
						value|-
							MenuItem
							,
								Header=key
								Items=-
									foreach
									value
									,
										key|,
											value|-
												.
													MenuItem
												,
													Header=key
													Click=,
														sender|value
	panel=-
		DockPanel
		,
			Children=+
				menu
				-
					ScrollViewer
	path="C:\asdf.meta"
	asdf=-
		load
	window=-
		Window
		,
			Content=panel
	1=-
		.
			-
				Application
			Run_Window
		window