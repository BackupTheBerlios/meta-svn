|,
	&=-
		sum
		+
			PresentationFramework
			PresentationCore
			windowsbase
			mscorlib
			Meta
		merge
	emptyView=,
		|,
			&=-
				textBox
			Background=.
				Brushes
				Red
			PreviewTextInput=,
				|,
					e|,
						.
							!e
							Handled=1
			getMap=,
				|0
	textBox=,
		|,
			&=-
				TextBox
			AcceptsReturn=1
			GotFocus=,
				|,
					|-
						SelectAll
	horizontal=.
		Orientation
		Horizontal
	stringView=,
		create=,
			|-
				stringView
				" "
		text|,
			&=-
				textBox
			Text=text
			Background=.
				Brushes
				Fuchsia
			getMap=,
				|Text
	numberView=,
		number|,
			&=-
				textBox
			Background=.
				Brushes
				LightYellow
			Text=-
				integerToString
				number
			getMap=,
				|-
					stringToInteger
					Text
			PreviewTextInput=,
				|,
					e|-
						apply
						.
							e
							Text
						,
							c|-
								if
								-
									not
									-
										.
											Char
											IsDigit_Char
										c
								,
									then=,
										|,
											.
												!e
												Handled=1
	multi=,
		views|,
			&=-
				StackPanel
			Margin=-
				Thickness_Double
				4
			Children=views
			Orientation=.
				PresentationFramework
				Orientation
				Vertical
			<.
				FrameworkElement
				HorizontalAlignmentProperty=.
				PresentationFramework
				HorizontalAlignment
				Left
			MouseLeftButtonDown=,
				|,
					e|,
						.
							!e
							Handled=1
						asdf=-
							.
								panel
								Focus
	entry=,
		create=,
			|-
				entry
				-
					.
						stringView
						create
				-
					.
						stringView
						create
		key|,
			value|,
				&=-
					control
					+
						key
						value
				Orientation=.
					PresentationFramework
					Orientation
					Horizontal
				getKey=,
					|-
						.
							Children
							0
							getMap
				getValue=,
					|-
						.
							Children
							1
							getMap
				KeyDown=-
					keyMapping
					,
						<.
							ModifierKeys
							Alt=,
							<.
								Key
								Enter=,
								|-
									.
										Parent
										Children
										Insert_Int32_UIElement
									-
										add
										-
											.
												Parent
												Children
												IndexOf_UIElement
											this
										1
									-
										.
											entry
											create
	view=,
		content|,
			&=-
				multi
				+
					content
			Margin=-
				Thickness_Double
				0
			Orientation=horizontal
			<.
				FrameworkElement
				HorizontalAlignmentProperty=.
				PresentationFramework
				HorizontalAlignment
				Left
			<.
				FrameworkElement
				VerticalAlignmentProperty=.
				PresentationFramework
				VerticalAlignment
				Top
			getMap=,
				|-
					.
						Children
						0
						getMap
			setView=,
				view|,
					!Children=+
						view
			keys=,
				<.
					ModifierKeys
					Alt=-
					merge
					,
						<.
							Key
							R=,
							|-
								.
									commands
									Debug
									Run
						<.
							Key
							Delete=,
							|-
								.
									Parent
									Children
									Remove_UIElement
								this
					-
						sum
						-
							foreach
							,
								<.
									Key
									U
								=stringView
								<.
									Key
									V
								=.
									lookupView
									create
								<.
									Key
									L
								=.
									literalView
									create
								<.
									Key
									N
								=numberView
								<.
									Key
									E
								=emptyView
								<.
									Key
									P
								=.
									programView
									create
								<.
									Key
									S
								=.
									selectView
									create
								<.
									Key
									T
								=.
									currentView
									create
								<.
									Key
									F
								=.
									searchView
									create
								<.
									Key
									C
								=.
									callView
									create
							,
								key|,
									value|,
										<key=,
											|+
												-
													setView
													-
														value
														0
												-
													.
														Children
														0
														Focus
						merge
			KeyDown=-
				keyMapping
				keys
	keyMapping=,
		keys|,
			sender|,
				e|-
					callIf
					keys
					.
						e
						KeyboardDevice
						Modifiers
					,
						functions|+
							-
								print
								"in keyMapping"
							-
								callIf
								functions
								.
									e
									SystemKey
								,
									func|,
										asdf=-
											print
											.
												e
												SystemKey
										asdf=-
											func
										.
											!e
											Handled=1
	control=,
		children|,
			&=-
				multi
				children
			Focusable=1
	functionView=,
		key|,
			value|,
				&=-
					control
					+
						-
							view
							-
								stringView
								.
									value
									parameter
						-
							parse
							.
								value
								expression
				getKey=,
					|"function"
				getValue=,
					|,
						parameter=-
							.
								Children
								0
								getMap
						expression=-
							.
								Children
								1
								getMap
				Background=.
					Brushes
					Azure
	statementView=,
		create=,
			|-
				statementView
				,
					key=+
						,
							lookup=,
								literal=" "
					value=,
						literal=" "
		source|,
			&=-
				control
				+
					-
						parse
						,
							select=.
								source
								key
					-
						parse
						.
							source
							value
			Orientation=.
				PresentationFramework
				Orientation
				Horizontal
			getMap=,
				|,
					key=.
						-
							.
								Children
								0
								getMap
						select
					value=-
						.
							Children
							1
							getMap
			Background=.
				Brushes
				Gray
			KeyDown=-
				keyMapping
				,
					<.
						ModifierKeys
						Alt=,
						<.
							Key
							Enter=,
							|+
								-
									print
									"enter pressed"
								-
									.
										Parent
										Children
										Insert_Int32_UIElement
									-
										add
										-
											.
												Parent
												Children
												IndexOf_UIElement
											this
										1
									-
										.
											statementView
											create
	functionStatementView=,
		source|,
			&=-
				control
				+
					-
						view
						-
							stringView
							.
								source
								value
								literal
								parameter
					-
						parse
						.
							source
							value
							literal
							expression
			getMap=,
				|,
					key=,
						literal="function"
					value=,
						literal=,
							parameter=-
								.
									Children
									0
									getMap
							expression=-
								.
									Children
									1
									getMap
			Background=.
				Brushes
				Azure
	programView=,
		create=,
			|-
				programView
				,
					program=+
						,
							key=+
								,
									lookup=,
										literal=" "
							value=,
								literal=" "
		source|,
			&=-
				control
				-
					apply
					.
						source
						program
					,
						statement|-
							view
							-
								if
								-
									equal
									.
										statement
										key
									,
										literal="function"
								,
									then=,
										|-
											functionStatementView
											statement
									else=,
										|-
											statementView
											statement
			getMap=,
				|,
					program=-
						apply
						-
							enumerableToArray
							Children
						,
							entry|-
								.
									entry
									getMap
			keys=,
				<.
					ModifierKeys
					Alt
				=,
					<.
						Key
						Enter
					=,
						|-
							.
								Children
								Add_UIElement
							-
								view
								-
									.
										statementView
										create
			KeyDown=-
				keyMapping
				keys
	mapView=,
		create=,
			|-
				mapView
				,
					"hello"="world"
		entries|,
			&=-
				control
				-
					foreach
					entries
					,
						key|,
							value|-
								if
								-
									equal
									key
									"function"
								,
									then=,
										|-
											functionView
											key
											value
									else=,
										|-
											entry
											-
												parse
												key
											-
												parse
												value
			getMap=,
				|-
					sum
					-
						apply
						-
							enumerableToArray
							Children
						,
							entry|,
								<-
									.
										entry
										getKey=-
									.
										entry
										getValue
					merge
	callView=,
		create=,
			|-
				callView
				,
					call=+
						,
							select=+
								,
									search=,
										literal="hello"
						,
							literal="world"
		source|,
			&=-
				control
				-
					apply
					.
						source
						call
					,
						arg|-
							parse
							arg
			Background=.
				Brushes
				BurlyWood
			Margin=-
				Thickness_Double
				3
			getMap=,
				|,
					call=-
						apply
						-
							enumerableToArray
							Children
						,
							child|-
								.
									child
									getMap
			keys=,
				<.
					ModifierKeys
					Alt
				=,
					<.
						Key
						Enter
					=,
						|-
							.
								Children
								Add_UIElement
							-
								.
									literalView
									create
			KeyDown=-
				keyMapping
				keys
	lookupView=,
		create=,
			|-
				lookupView
				,
					lookup=,
						literal="hello"
		source|,
			&=-
				control
				+
					-
						parse
						.
							source
							lookup
			getMap=,
				|,
					lookup=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				MistyRose
	searchView=,
		create=,
			|-
				searchView
				,
					search=,
						literal="hello"
		source|,
			&=-
				control
				+
					-
						parse
						.
							source
							search
			getMap=,
				|,
					search=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				DeepSkyBlue
	literalView=,
		create=,
			|-
				literalView
				,
					literal=" "
		source|,
			&=-
				control
				+
					-
						parse
						.
							source
							literal
			getMap=,
				|,
					literal=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				DarkViolet
	currentView=,
		create=,
			|-
				currentView
		|,
			&=-
				textBox
			Background=.
				Brushes
				White
			PreviewTextInput=,
				|,
					e|,
						.
							!e
							Handled=1
			getMap=,
				|,
					current=0
	selectView=,
		create=,
			|-
				selectView
				,
					select=+
						,
							search=,
								literal="hello"
		source|,
			&=-
				control
				-
					apply
					.
						source
						select
					,
						arg|-
							parse
							arg
			keys=,
				<.
					ModifierKeys
					Alt
				=,
					<.
						Key
						Enter
					=,
						|-
							.
								Children
								Add_UIElement
							-
								.
									lookupView
									create
			KeyDown=-
				keyMapping
				keys
			getMap=,
				|,
					select=-
						apply
						-
							enumerableToArray
							Children
						,
							child|-
								.
									child
									getMap
			Background=.
				Brushes
				Chocolate
	parse=,
		arg|-
			view
			-
				case
				arg
				,
					<isEmpty=emptyView
					<isString=stringView
					<isNumber=numberView
					<,
						|-
							hasKey
							arg
							"call"=callView
					<,
						|-
							hasKey
							arg
							"literal"=literalView
					<,
						|-
							hasKey
							arg
							"search"=searchView
					<,
						|-
							hasKey
							arg
							"lookup"=lookupView
					<,
						|-
							hasKey
							arg
							"select"=selectView
					<,
						|-
							hasKey
							arg
							"current"=currentView
					<,
						|-
							hasKey
							arg
							"program"=programView
				,
					|-
						mapView
						arg
	load=,
		|-
			merge
			.
				panel
				Children
				1
			,
				Content=-
					parse
					-
						.
							Binary
							Deserialize_String
						path
	currentData=,
		|-
			.
				panel
				Children
				1
				Content
				getMap
	commands=,
		File=,
			Open=,
				|-
					.
						,
							&=-
								OpenFileDialog
								OpenFileDialog
							Filter="*.meta (Meta files)|*.meta"
							FileOk=,
								dialog|,
									|,
										!path=.
											dialog
											FileName
										asdf=-
											load
						ShowDialog
			SaveAs=,
				|-
					.
						,
							&=-
								.
									SaveFileDialog
									SaveFileDialog
							Filter="*.meta (Meta files)|*.meta"
							DefaultExt=".meta"
							AddExtension=1
							FileOk=,
								dialog|,
									|,
										!path=.
											dialog
											FileName
										asdf=-
											Save
						ShowDialog
			Save=,
				|-
					if
					-
						isEmpty
						path
					,
						then=,
							|-
								SaveAs
						else=,
							|-
								.
									Binary
									Serialize_Map_String
								-
									currentData
								path
			Exit=,
				|-
					.
						window
						Close
		Edit=,
			String=,
				|0
			Number=,
				|0
			Map=,
				|0
			Empty=,
				|0
		View=,
			Up=,
				|0
			Down=,
				|0
			Next=,
				|0
			Previous=,
				|0
		Debug=,
			Run=,
				|+
					-
						print
						-
							currentData
					-
						.
							-
								ObjectMap_Map
								-
									currentData
							Call_Map_Position
						0
						-
							Position_Position_Map
							-
								Position_Position_Map
								.
									RootPosition
									rootPosition
								"filesystem"
							"localhost"
	menu=-
		Menu
		,
			<.
				DockPanel
				DockProperty=.
				Dock
				Top
			Items=-
				foreach
				commands
				,
					key|,
						value|-
							MenuItem
							,
								Header=key
								Items=-
									foreach
									value
									,
										key|,
											value|-
												.
													MenuItem
												,
													Header=key
													Click=,
														sender|value
	panel=-
		DockPanel
		,
			Children=+
				menu
				-
					ScrollViewer
	path="C:\asdf.meta"
	asdf=-
		load
	window=-
		Window
		,
			Content=panel
	1=-
		.
			-
				Application
			Run_Window
		window