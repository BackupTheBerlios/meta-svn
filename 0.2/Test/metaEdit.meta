|,
	&=-
		sum
		+
			PresentationFramework
			PresentationCore
			windowsbase
			mscorlib
			Meta
		merge
	emptyView=,
		|-
			merge
			-
				textBox
			,
				Background=.
					Brushes
					Red
				PreviewTextInput=,
					|,
						e|,
							&=e
							Handled=1
				getMap=,
					|0
	textBox=,
		|-
			merge
			-
				TextBox
			,
				AcceptsReturn=1
				GotFocus=,
					|,
						|-
							SelectAll
	horizontal=.
		Orientation
		Horizontal
	stringView=,
		create=,
			|-
				stringView
				" "
		text|-
			merge
			-
				textBox
			,
				Text=text
				Background=.
					Brushes
					Fuchsia
				getMap=,
					|Text
	numberView=,
		number|-
			merge
			-
				textBox
			,
				Background=.
					Brushes
					LightYellow
				Text=-
					integerToString
					number
				getMap=,
					|-
						stringToInteger
						Text
				PreviewTextInput=,
					|,
						e|-
							apply
							.
								e
								Text
							,
								c|-
									if
									-
										not
										-
											.
												Char
												IsDigit_Char
											c
									,
										then=,
											|,
												&=e
												Handled=1
	multi=,
		views|,
			&=-
				StackPanel
			Margin=-
				.
					Thickness
					Thickness_Double
				4
			Children=views
			Focusable=1
			Orientation=.
				PresentationFramework
				Orientation
				Vertical
			MouseLeftButtonDown=,
				|,
					e|,
						&=e
						Handled=1
						asdf=-
							.
								panel
								Focus
	entry=,
		create=,
			|-
				entry
				-
					.
						stringView
						create
				-
					.
						stringView
						create
		key|,
			value|,
				&=-
					multi
					+
						key
						value
				getKey=,
					|-
						.
							Children
							0
							getMap
				Focusable=1
				getValue=,
					|-
						.
							Children
							1
							getMap
				KeyDown=-
					keyMapping
					,
						<.
							ModifierKeys
							Alt=,
							<.
								Key
								Enter=,
								|-
									.
										Parent
										Children
										Insert_Int32_UIElement
									-
										add
										-
											.
												Parent
												Children
												IndexOf_UIElement
											thisEntry
										1
									-
										.
											entry
											create
	view=,
		content|,
			&=-
				multi
				+
					content
			Margin=-
				.
					Thickness
					Thickness_Double
				0
			Orientation=horizontal
			getMap=,
				|-
					.
						Children
						0
						getMap
			setView=,
				view|,
					!Children=+
						view
			keys=,
				<.
					ModifierKeys
					None=,
					<.
						Key
						Delete=,
						|-
							.
								Keyboard
								FocusedElement
								Parent
								Children
								Remove_UIElement
							.
								Keyboard
								FocusedElement
				<.
					ModifierKeys
					Alt=-
					merge
					,
						<.
							Key
							R=,
							|-
								.
									commands
									Debug
									Run
					-
						sum
						-
							foreach
							,
								<.
									Key
									U=stringView
								<.
									Key
									L=.
									literalView
									create
								<.
									Key
									N=numberView
								<.
									Key
									E=emptyView
								<.
									Key
									P=.
									programView
									create
								<.
									Key
									S=.
									selectView
									create
								<.
									Key
									F=.
									searchView
									create
								<.
									Key
									C=.
									callView
									create
							,
								key|,
									value|,
										<key=,
											|+
												-
													setView
													-
														value
														0
												-
													.
														Children
														0
														Focus
						merge
			KeyDown=-
				keyMapping
				keys
	keyMapping=,
		keys|,
			sender|,
				e|-
					callIf
					keys
					.
						e
						KeyboardDevice
						Modifiers
					,
						moreKeys|-
							callIf
							moreKeys
							.
								e
								SystemKey
							,
								func|,
									asdf=-
										func
									&=e
									Handled=1
	functionView=,
		key|,
			value|,
				&=-
					multi
					+
						-
							view
							-
								stringView
								.
									value
									parameter
						-
							parse
							.
								value
								expression
				Focusable=1
				getKey=,
					|"function"
				getValue=,
					|,
						parameter=-
							.
								Children
								0
								getMap
						expression=-
							.
								Children
								1
								getMap
				Background=.
					Brushes
					Azure
	statementView=,
		create=,
			|-
				statementView
				,
					key=+
						,
							lookup=,
								literal=" "
					value=,
						literal=" "
		source|,
			&=-
				multi
				+
					-
						parse
						,
							select=.
								source
								key
					-
						parse
						.
							source
							value
			getMap=,
				|,
					key=.
						-
							.
								Children
								0
								getMap
						select
					value=-
						.
							Children
							1
							getMap
			Focusable=1
			Background=.
				Brushes
				Gray
			KeyDown=-
				keyMapping
				,
					<.
						ModifierKeys
						Alt=,
						<.
							Key
							Enter=,
							|-
								.
									Parent
									Children
									Insert_Int32_UIElement
								-
									add
									-
										.
											Parent
											Children
											IndexOf_UIElement
										thisEntry
									1
								-
									.
										statementView
										create
	functionStatementView=,
		source|,
			&=-
				multi
				+
					-
						view
						-
							stringView
							.
								source
								value
								literal
								parameter
					-
						parse
						.
							source
							value
							literal
							expression
			Focusable=1
			getMap=,
				|,
					key=,
						literal="function"
					value=,
						literal=,
							parameter=-
								.
									Children
									0
									getMap
							expression=-
								.
									Children
									1
									getMap
			Background=.
				Brushes
				Azure
	programView=,
		create=,
			|-
				programView
				,
					program=+
						,
							key=+
								,
									lookup=,
										literal=" "
							value=,
								literal=" "
		source|,
			&=-
				multi
				-
					apply
					.
						source
						program
					,
						statement|-
							if
							-
								equal
								.
									statement
									key
								,
									literal="function"
							,
								then=,
									|-
										functionStatementView
										statement
								else=,
									|-
										statementView
										statement
			Focusable=1
			getMap=,
				|,
					program=-
						apply
						-
							enumerableToArray
							Children
						,
							entry|-
								.
									entry
									getMap
	mapView=,
		create=,
			|-
				mapView
				,
					"hello"="world"
		entries|,
			&=-
				multi
				-
					foreach
					entries
					,
						key|,
							value|-
								if
								-
									equal
									key
									"function"
								,
									then=,
										|-
											functionView
											key
											value
									else=,
										|-
											entry
											-
												parse
												key
											-
												parse
												value
			Focusable=1
			getMap=,
				|-
					sum
					-
						apply
						-
							enumerableToArray
							Children
						,
							entry|,
								<-
									.
										entry
										getKey=-
									.
										entry
										getValue								
					merge
	callView=,
		create=,
			|-
				callView
				,
					call=+
						,
							search=,
								literal="hello"
						,
							literal="world"
		source|,
			&=-
				multi
				-
					apply
					.
						source
						call
					,
						arg|-
							parse
							arg
			Background=.
				Brushes
				BurlyWood
			Focusable=1
			Margin=-
				.
					Thickness
					Thickness_Double
				3
			getMap=,
				|,
					call=-
						apply
						-
							enumerableToArray
							Children
						,
							child|-
								.
									child
									getMap
	lookupView=,
		create=,
			|-
				lookupView
				,
					lookup=,
						literal="hello"				
		source|,
			&=-
				multi
				+
					-
						parse
						.
							source
							lookup
			Focusable=1
			getMap=,
				|,
					lookup=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				MistyRose
	searchView=,
		create=,
			|-
				searchView
				,
					search=,
						literal="hello"
		source|,
			&=-
				multi
				+
					-
						parse
						.
							source
							search
			Focusable=1
			getMap=,
				|,
					search=-
						.
							Children
							0
							getMap
			Background=.
				Brushes
				DeepSkyBlue
	literalView=,
		create=,
			|-
				literalView
				,
					literal=" "
		source|,
			&=-
				multi
				+
					-
						parse
						.
							source
							literal
			getMap=,
				|,
					literal=-
						.
							Children
							0
							getMap
			Focusable=1
			Background=.
				Brushes
				DarkViolet
	selectView=,
		create=,
			|-
				selectView
				,
					select=+
						,
							search=,
								literal="hello"
		source|,
			&=-
				multi
				-
					apply
					.
						source
						select
					,
						arg|-
							parse
							arg
			Focusable=1
			getMap=,
				|,
					select=-
						apply
						-
							enumerableToArray
							Children
						,
							child|-
								.
									child
									getMap
			Background=.
				Brushes
				Chocolate
	parse=,
		arg|-
			view
			-
				case
				arg
				,
					<isEmpty=emptyView
					<isString=stringView
					<isNumber=numberView
					<,
						|-
							hasKey
							arg
							"call"=callView
					<,
						|-
							hasKey
							arg
							"literal"=literalView
					<,
						|-
							hasKey
							arg
							"search"=searchView
					<,
						|-
							hasKey
							arg
							"lookup"=lookupView
					<,
						|-
							hasKey
							arg
							"select"=selectView
					<,
						|-
							hasKey
							arg
							"program"=programView
				,
					|-
						mapView
						arg
	load=,
		|-
			merge
			.
				panel
				Children
				1
			,
				Content=-
					parse
					-
						.
							Binary
							Deserialize_String
						path
	currentData=,
		|-
			.
				panel
				Children
				1
				Content
				getMap
	commands=,
		File=,
			Open=,
				|,
					dialog=-
						OpenFileDialog
						OpenFileDialog
					.
						dialog
						Filter
					="*.meta (Meta files)|*.meta"
					asdf=-
						if
						-
							.
								dialog
								ShowDialog
						,
							then=,
								|,
									!path=.
										dialog
										FileName
									asdf=-
										load
			SaveAs=,
				|-
					if
					-
						.
							,
								&=-
									.
										SaveFileDialog
										SaveFileDialog
								Filter="*.meta (Meta files)|*.meta"
								DefaultExt=".meta"
								AddExtension=1
							ShowDialog
					,
						then=,
							|,
								!path=.
									dialog
									FileName
								asdf=-
									Save
			Save=,
				|-
					if
					-
						isEmpty
						path
					,
						then=,
							|-
								SaveAs
						else=,
							|-
								.
									Binary
									Serialize_Map_String
								-
									currentData
								path
			Exit=,
				|-
					.
						window
						Close
		Edit=,
			String=,
				|0
			Number=,
				|0
			Map=,
				|0
			Empty=,
				|0
		View=,
			Up=,
				|0
			Down=,
				|0
			Next=,
				|0
			Previous=,
				|0
		Debug=,
			Run=,
				|+
					-
						print
						-
							currentData
					-
						.
							-
								.
									ObjectMap
									ObjectMap_Map
								-
									currentData
							Call_Map_Position
						0
						-
							.
								Position
								Position_Position_Map
							-
								.
									Position
									Position_Position_Map
								.
									RootPosition
									rootPosition
								"filesystem"
							"localhost"
	menu=-
		Menu
		,
			<.
				DockPanel
				DockProperty=.
				Dock
				Top
			Items=-
				foreach
				commands
				,
					key|,
						value|-
							MenuItem
							,
								Header=key
								Items=-
									foreach
									value
									,
										key|,
											value|-
												.
													MenuItem
												,
													Header=key
													Click=,
														sender|value
	panel=-
		DockPanel
		,
			Children=+
				menu
				-
					ScrollViewer
	path="C:\asdf.meta"
	asdf=-
		load
	window=-
		Window
		,
			Content=panel
	1=-
		.
			-
				Application
			Run_Window
		window