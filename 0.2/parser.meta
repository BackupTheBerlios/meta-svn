integer "0123456789"
syntax
	string '"'
text|
	number rule
		condition
			text|
				text apply
					array text
					condition
						char|contains
							array integer
							value char
					function
						arg|arg
				current if
					condition not equal
						. text
						. 0
					then
						|
							result text
		result
			text|/.Meta.Number.Parse text
	string rule
		condition
			text|
				if
					condition and
						. equal
							. first text
							. syntax.string
						. equal
							. last text
							. syntax.string
					then
						|
							result text
		result
			text|text
	expression alternatives
		. string
		. number
	parsed expression text
	current parsed.result
sequence
	rules|
		text|
			matched 0
			rest text
			. apply
				array rules
				function
					rule|
						ruleResult rule rest
						if
							condition not zero ruleResult
							then
								|
									$rest ruleResult.rest
									$matched join
										. matched
										.
											. ruleResult.result
alternatives
	alts|
		text|
			result 0
			. apply
				array alts
				condition
					alt|
						applied alt text
						current if
							condition not zero applied
							then
								|
									$result applied.result
									current 0
							else
								|1
				function
					|0
rule
	arg|
		text|
			map arg.condition text
			current if
				condition hasKey
					map map
					key "result"
				then
					|
						result arg.result map.result